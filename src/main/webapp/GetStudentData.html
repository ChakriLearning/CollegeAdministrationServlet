<!DOCTYPE html>
<html lang="en">
<head>
    <title>Student Data</title>
    <style>
        /* CSS styles for the table and its rows */
        table {
            border-collapse: collapse;
            width: 100%;
        }

        th, td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        tr:hover {
            background-color: #7d2ea4; /* Change background color on hover */
        }

        /* CSS styles for the table header */
        th {
            background-color: #4CAF50; /* Green */
            color: #400f0f;
        }
    </style>
</head>
<body>
<div id="userNameDisplay" style="position: absolute; top: 10px; right: 10px;"></div><br>
<h1>Student Data : </h1>
<div id="StudentData"></div>

<script>
    const queryString = window.location.search;
    console.log(queryString);
    let urlSearchParams = new URLSearchParams(queryString);
    let rollNo = urlSearchParams.get("rollNo");


    fetch(`http://localhost:8081/CollegeAdministrationServlet/login`)
        .then(response => response.json())
        .then(data => {
            const userName = data.username;
            document.getElementById('userNameDisplay').innerText = "User : " + userName;
            // Creating the mainPageLink element
            const mainPageLink = document.createElement('a');
            mainPageLink.href = "ListStudentDataTable.html";
            mainPageLink.innerHTML = "<h3>Main Page</h3>";
            document.body.appendChild(mainPageLink);
        })
        .catch(error => console.error('Error fetching JSON data:', error));
    fetch(`http://localhost:8081/CollegeAdministrationServlet/student?rollNo=${rollNo}`, {
        method: 'get',
        headers: {
            'Content-Type': 'application/json'
        }
    })
        .then(response => response.json())
        .then(data => {
            let studentListDiv = document.getElementById('StudentData');
            let studentDiv = document.createElement('div');
            studentDiv.innerHTML = `
<table border="1">
<thead>
<tr>
<th>RollNo</th>
<th>Name</th>
<th>Age</th>
<th>PhoneNo</th>
</tr>
</thead>
<tbody>
<tr>
<td>${data.rollNo}</td>
<td>${data.name}</td>
<td>${data.age}</td>
<td>${data.phoneNo}</td>
</tr>
</tbody>
</table>
                        <hr>
                    `;
            studentListDiv.appendChild(studentDiv);
        })
        .catch(error => console.error('Error fetching JSON data:', error));
</script>
</body>
</html>
